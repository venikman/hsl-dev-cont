{
  "name": "Haskell (GHCup + HLS)",
  "build": {
    "dockerfile": "Dockerfile"
  },

  // Use the non-root user from the base devcontainer image
  "remoteUser": "vscode",
  "updateRemoteUserUID": true,

  "customizations": {
    "vscode": {
      "extensions": [
        "haskell.haskell"
      ],
      "settings": {
        // Use HLS from PATH inside the container
        "haskell.manageHLS": "PATH",
        "haskell.formattingProvider": "ormolu"
      }
    }
  },

  // Optional: keep as a soft check so it never breaks startup
  "postCreateCommand": "ghcup --version || true; ghc --version || true; cabal --version || true; stack --version || true; haskell-language-server --version || true"
}
